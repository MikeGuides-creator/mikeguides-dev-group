<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OnYou Builder • MikeGuides Dev Group</title>

  <link rel="stylesheet" href="../../../assets/css/site.css" />

  <style>
    .builder-layout{
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
      padding: 32px 0 60px;
    }
    @media (min-width: 1000px){
      .builder-layout{ grid-template-columns: 420px 1fr; }
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
      min-width: 0;
    }

    .panel h2{
      margin:0 0 12px;
      font-family:Poppins,Inter,sans-serif;
      font-size:18px;
    }

    .field-group{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-bottom:16px;
    }

    label{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
      letter-spacing:.06em;
      text-transform:uppercase;
    }

    input, textarea, select{
      background: rgba(255,255,255,.06);
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      color:var(--text);
      font-size:14px;
    }

    /* Dropdown menu contrast fix */
    select option{
      color: black;
      background: white;
    }

    textarea{ min-height:80px; resize:vertical; }

    .preview-area{
      background:white;
      color:black;
      border-radius:12px;
      padding:24px;
      min-height:540px;
    }

    .preview-muted{ color:#555; font-size:14px; }

    .hint{
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
    }

    .block{
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      border-radius: 14px;
      padding: 12px;
      margin-bottom: 12px;
    }

    .block-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }

    .block-title{
      font-weight:900;
      font-size:13px;
      color: var(--muted);
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    .btn-sm{
      padding:8px 10px;
      border-radius: 12px;
      font-size: 13px;
    }
    
    .chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin: 8px 0 16px;
}

.chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.05);
  color: var(--text);
  font-size:13px;
}

.chip button{
  border:0;
  background: transparent;
  color: var(--muted);
  cursor:pointer;
  font-size:14px;
  line-height:1;
  padding:0;
}
  </style>
</head>
<body>

<header class="topbar">
  <div class="topbar-inner container">
    <a class="brand" href="../../">
      <span class="brand-mark">MG</span>
      <span class="brand-text">
        <span class="brand-name">MikeGuides Dev Group</span>
        <span class="brand-sub">OnYou Builder</span>
      </span>
    </a>

    <div class="actions">
      <a class="btn btn-ghost" href="../">Back to Product</a>
    </div>
  </div>
</header>

<main class="container">

  <div class="builder-layout">

    <!-- LEFT PANEL -->
    <div class="panel">
      <h2>Form Configuration</h2>

      <div class="field-group">
        <label for="templateType">Template Type</label>
        <select id="templateType">
          <option value="resume">Resume</option>
          <option value="nda">NDA</option>
          <option value="employment">Employment Application</option>
        </select>
      </div>

      <div class="field-group">
        <label for="fullName">Full Name</label>
        <input id="fullName" type="text" placeholder="John Doe" autocomplete="name">
      </div>

      <div class="field-group">
        <label for="roleTitle">Title / Role</label>
        <input id="roleTitle" type="text" placeholder="Project Manager" autocomplete="organization-title">
      </div>

      <div class="field-group">
        <label for="summary">Summary</label>
        <textarea id="summary" placeholder="Brief professional summary..."></textarea>
      </div>

      <div class="mini-divider"></div>
      <div class="block-title">Contact</div>

      <div class="field-group">
        <label for="email">Email</label>
        <input id="email" type="text" placeholder="email@example.com" autocomplete="email">
      </div>

      <div class="field-group">
        <label for="phone">Phone</label>
        <input id="phone" type="text" placeholder="(555) 123-4567" autocomplete="tel">
      </div>

      <div class="field-group">
        <label for="address">Address</label>
        <input id="address" type="text" placeholder="City, State">
      </div>

      <div class="field-group">
        <label style="text-transform:none; letter-spacing:0; font-weight:600; color:var(--text);">
          <input id="toggleHeadshot" type="checkbox" style="margin-right:8px;">
          Include headshot placeholder
        </label>
      </div>

      <div class="mini-divider"></div>

      <div class="block-head">
        <div class="block-title">Experience</div>
        <button id="btnAddExp" class="btn btn-ghost btn-sm" type="button">+ Add Experience</button>
      </div>
      <div id="expList"></div>

      <div class="mini-divider"></div>

      <div class="block-head">
        <div class="block-title">Education</div>
        <button id="btnAddEdu" class="btn btn-ghost btn-sm" type="button">+ Add Education</button>
      </div>
      <div id="eduList"></div>

      <div class="mini-divider"></div>

<div class="block-head">
  <div class="block-title">Skills</div>
</div>

<div class="field-group">
  <label for="skillInput">Add a skill (press Enter)</label>
  <div style="display:flex; gap:10px;">
    <input id="skillInput" type="text" placeholder="e.g., Leadership, Excel, Classroom Management" style="flex:1;">
    <button id="btnAddSkill" type="button" class="btn">Add</button>
  </div>
</div>
      
<div class="field-group">
  <label>
    <input type="checkbox" id="toggleReferences">
    Include "References Available Upon Request"
  </label>
</div>
      
<div id="skillsChips" class="chips"></div>

      <button id="btnPreview" class="btn btn-wide" type="button">Generate Preview</button>
      <div class="hint">Live preview updates as you type. Button will later run template + validation.</div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="panel">
      <h2>Live Preview</h2>
      <div class="preview-area" id="previewRoot"></div>
    </div>
    
<div style="font-size:12px;color:#888;margin-top:-6px;">
  Build: <span id="buildId"></span>
</div>
    
  </div>

</main>

<script>
  const $ = (id) => document.getElementById(id);

  const state = {
    templateType: "resume",
    fullName: "John Doe",
    roleTitle: "Project Manager",
    summary: "This area will render structured output in real time. The final layout will be export-ready and professionally formatted.",

    email: "john@example.com",
    phone: "(555) 123-4567",
    address: "Chicago, IL",
    showHeadshot: true,

    experience: [
      {
        company: "Acme Construction",
        role: "Project Manager",
        dates: "2022 – Present",
        location: "Chicago, IL",
        desc: "Led multi-site project execution, improved coordination, and reduced delays through clear scheduling and stakeholder communication."
      }
    ],

    education: [
      {
        school: "State University",
        degree: "B.S. Business Administration",
        dates: "2018 – 2022",
        location: "Springfield, IL",
        notes: "Relevant coursework: operations, finance, project management."
      }
    ],
    
    certifications: [
  {
    name: "PMP Certification",
    issuer: "Project Management Institute",
    year: "2023"
  }
],

projects: [
  {
    title: "Warehouse Optimization Initiative",
    role: "Lead Coordinator",
    desc: "Reduced operating costs by 18% through logistics restructuring."
  }
],

showReferences: false,
    };
  
  state.skills = Array.isArray(state.skills) ? state.skills : [];
if (!state.skills.length) {
  state.skills = ["Leadership", "Operations", "Problem Solving"];
}
  
  function esc(s){
    return String(s ?? "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function syncLeftPanelVisibility(){
    const show = state.templateType === "resume";
    const expHost = $("expList");
    const eduHost = $("eduList");
    const addExp = $("btnAddExp");
    const addEdu = $("btnAddEdu");

    if (expHost) expHost.style.display = show ? "" : "none";
    if (eduHost) eduHost.style.display = show ? "" : "none";
    if (addExp) addExp.style.display = show ? "" : "none";
    if (addEdu) addEdu.style.display = show ? "" : "none";
  }

  function renderExperienceEditor(){
    const host = $("expList");
    if (!host) return;

    host.innerHTML = state.experience.map((x, idx) => `
      <div class="block">
        <div class="block-head">
          <div class="block-title">Entry ${idx + 1}</div>
          <button class="btn btn-ghost btn-sm" type="button" data-exp-remove="${idx}">Remove</button>
        </div>

        <div class="field-group">
          <label for="exp_company_${idx}">Company</label>
          <input id="exp_company_${idx}" type="text" value="${esc(x.company)}" placeholder="Company name" />
        </div>

        <div class="field-group">
          <label for="exp_role_${idx}">Role / Title</label>
          <input id="exp_role_${idx}" type="text" value="${esc(x.role)}" placeholder="Role/title" />
        </div>

        <div class="field-group">
          <label for="exp_dates_${idx}">Dates</label>
          <input id="exp_dates_${idx}" type="text" value="${esc(x.dates)}" placeholder="2022 – Present" />
        </div>

        <div class="field-group">
          <label for="exp_location_${idx}">Location</label>
          <input id="exp_location_${idx}" type="text" value="${esc(x.location)}" placeholder="City, State" />
        </div>

        <div class="field-group">
          <label for="exp_desc_${idx}">Description</label>
          <textarea id="exp_desc_${idx}" placeholder="What did you do? What changed because you did it?">${esc(x.desc)}</textarea>
        </div>
      </div>
    `).join("");
    
    state.experience.forEach((_, idx) => {
      $("exp_company_" + idx)?.addEventListener("input", (e) => { state.experience[idx].company = e.target.value; renderPreview(); });
      $("exp_role_" + idx)?.addEventListener("input", (e) => { state.experience[idx].role = e.target.value; renderPreview(); });
      $("exp_dates_" + idx)?.addEventListener("input", (e) => { state.experience[idx].dates = e.target.value; renderPreview(); });
      $("exp_location_" + idx)?.addEventListener("input", (e) => { state.experience[idx].location = e.target.value; renderPreview(); });
      $("exp_desc_" + idx)?.addEventListener("input", (e) => { state.experience[idx].desc = e.target.value; renderPreview(); });
    });

    host.querySelectorAll("[data-exp-remove]").forEach(btn => {
      btn.addEventListener("click", () => {
        const i = Number(btn.getAttribute("data-exp-remove"));
        state.experience.splice(i, 1);
        renderExperienceEditor();
        renderPreview();
      });
    });
  }
  
function normalizeSkill(s){
  return (s || "").trim().replace(/\s+/g, " ");
}

function renderSkillsEditor(){
  const host = $("skillsChips");
  if (!host) return;

  host.innerHTML = (state.skills || []).map((s, idx) => `
    <span class="chip">
      ${esc(s)}
      <button type="button" aria-label="Remove skill" data-skill-remove="${idx}">✕</button>
    </span>
  `).join("");

  host.querySelectorAll("[data-skill-remove]").forEach(btn => {
    btn.addEventListener("click", () => {
      const i = Number(btn.getAttribute("data-skill-remove"));
      state.skills.splice(i, 1);
      renderSkillsEditor();
      renderPreview();
    });
  });
}
  
  function renderEducationEditor(){
    const host = $("eduList");
    if (!host) return;

    host.innerHTML = state.education.map((x, idx) => `
      <div class="block">
        <div class="block-head">
          <div class="block-title">Entry ${idx + 1}</div>
          <button class="btn btn-ghost btn-sm" type="button" data-edu-remove="${idx}">Remove</button>
        </div>

        <div class="field-group">
          <label for="edu_school_${idx}">School</label>
          <input id="edu_school_${idx}" type="text" value="${esc(x.school)}" placeholder="School / Institution" />
        </div>

        <div class="field-group">
          <label for="edu_degree_${idx}">Degree / Program</label>
          <input id="edu_degree_${idx}" type="text" value="${esc(x.degree)}" placeholder="Degree or program" />
        </div>

        <div class="field-group">
          <label for="edu_dates_${idx}">Dates</label>
          <input id="edu_dates_${idx}" type="text" value="${esc(x.dates)}" placeholder="2018 – 2022" />
        </div>

        <div class="field-group">
          <label for="edu_location_${idx}">Location</label>
          <input id="edu_location_${idx}" type="text" value="${esc(x.location)}" placeholder="City, State" />
        </div>

        <div class="field-group">
          <label for="edu_notes_${idx}">Notes</label>
          <textarea id="edu_notes_${idx}" placeholder="Honors, coursework, focus...">${esc(x.notes)}</textarea>
        </div>
      </div>
    `).join("");

    state.education.forEach((_, idx) => {
      $("edu_school_" + idx)?.addEventListener("input", (e) => { state.education[idx].school = e.target.value; renderPreview(); });
      $("edu_degree_" + idx)?.addEventListener("input", (e) => { state.education[idx].degree = e.target.value; renderPreview(); });
      $("edu_dates_" + idx)?.addEventListener("input", (e) => { state.education[idx].dates = e.target.value; renderPreview(); });
      $("edu_location_" + idx)?.addEventListener("input", (e) => { state.education[idx].location = e.target.value; renderPreview(); });
      $("edu_notes_" + idx)?.addEventListener("input", (e) => { state.education[idx].notes = e.target.value; renderPreview(); });
    });

    host.querySelectorAll("[data-edu-remove]").forEach(btn => {
      btn.addEventListener("click", () => {
        const i = Number(btn.getAttribute("data-edu-remove"));
        state.education.splice(i, 1);
        renderEducationEditor();
        renderPreview();
      });
    });
  }

  function renderCertificationsEditor(){
  const host = $("certList");
  if (!host) return;

  host.innerHTML = state.certifications.map((c, idx) => `
    <div class="card">
      <div class="field-group">
        <label>Name</label>
        <input id="cert_name_${idx}" value="${esc(c.name)}">
      </div>
      <div class="field-group">
        <label>Issuer</label>
        <input id="cert_issuer_${idx}" value="${esc(c.issuer)}">
      </div>
      <div class="field-group">
        <label>Year</label>
        <input id="cert_year_${idx}" value="${esc(c.year)}">
      </div>
    </div>
  `).join("");

  state.certifications.forEach((_, idx) => {
    $("cert_name_" + idx)?.addEventListener("input", e => {
      state.certifications[idx].name = e.target.value;
      renderPreview();
    });
    $("cert_issuer_" + idx)?.addEventListener("input", e => {
      state.certifications[idx].issuer = e.target.value;
      renderPreview();
    });
    $("cert_year_" + idx)?.addEventListener("input", e => {
      state.certifications[idx].year = e.target.value;
      renderPreview();
    });
  });
}

  function renderProjectsEditor(){
  const host = $("projectList");
  if (!host) return;

  host.innerHTML = state.projects.map((p, idx) => `
    <div class="card">
      <div class="field-group">
        <label>Title</label>
        <input id="proj_title_${idx}" value="${esc(p.title)}">
      </div>
      <div class="field-group">
        <label>Your Role</label>
        <input id="proj_role_${idx}" value="${esc(p.role)}">
      </div>
      <div class="field-group">
        <label>Description</label>
        <textarea id="proj_desc_${idx}">${esc(p.desc)}</textarea>
      </div>
    </div>
  `).join("");

  state.projects.forEach((_, idx) => {
    $("proj_title_" + idx)?.addEventListener("input", e => {
      state.projects[idx].title = e.target.value;
      renderPreview();
    });
    $("proj_role_" + idx)?.addEventListener("input", e => {
      state.projects[idx].role = e.target.value;
      renderPreview();
    });
    $("proj_desc_" + idx)?.addEventListener("input", e => {
      state.projects[idx].desc = e.target.value;
      renderPreview();
    });
  });
}
  
  function renderExperiencePreview(){
    if (!state.experience.length) {
      return `<p class="preview-muted"><strong>Experience:</strong> (none yet)</p>`;
    }
    return `
      <h4 style="margin:18px 0 10px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:#444;">Experience</h4>
      ${state.experience.map(x => `
        <div style="margin-bottom:12px;">
          <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div><strong>${esc(x.role || " ")}</strong> — ${esc(x.company || " ")}</div>
            <div style="color:#666; font-size:13px;">${esc(x.dates || "")}${x.location ? " • " + esc(x.location) : ""}</div>
          </div>
          <div style="margin-top:6px; color:#222; font-size:14px; line-height:1.5;">${esc(x.desc || " ")}</div>
        </div>
      `).join("")}
    `;
  }

  function renderEducationPreview(){
    if (!state.education.length) {
      return `<p class="preview-muted"><strong>Education:</strong> (none yet)</p>`;
    }
    return `
      <h4 style="margin:18px 0 10px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:#444;">Education</h4>
      ${state.education.map(x => `
        <div style="margin-bottom:12px;">
          <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div><strong>${esc(x.degree || " ")}</strong> — ${esc(x.school || " ")}</div>
            <div style="color:#666; font-size:13px;">${esc(x.dates || "")}${x.location ? " • " + esc(x.location) : ""}</div>
          </div>
          ${x.notes ? `<div style="margin-top:6px; color:#222; font-size:14px; line-height:1.5;">${esc(x.notes)}</div>` : ""}
        </div>
      `).join("")}
    `;
  }

 function renderSkillsPreview(){
  if (!state.skills || !state.skills.length) {
    return `<p class="preview-muted"><strong>Skills:</strong> (none yet)</p>`;
  }
   
  return `
    <h4 style="margin:18px 0 10px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:#444;">Skills</h4>
    <div style="display:flex;flex-wrap:wrap;gap:8px;">
      ${state.skills.map(s => `
        <span style="display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid #e7e7e7;font-size:13px;color:#222;">
          ${esc(s)}
        </span>
      `).join("")}
    </div>
  `;
}

function renderCertificationsPreview(){
  if (!state.certifications?.length) return "";

  return `
    <h4 class="preview-section">Certifications</h4>
    ${state.certifications.map(c => `
      <div>
        <strong>${esc(c.name)}</strong> — ${esc(c.issuer)} (${esc(c.year)})
      </div>
    `).join("")}
  `;
}

function renderCertificationsPreview(){
  if (!state.certifications?.length) return "";

  return `
    <h4 class="preview-section">Certifications</h4>
    ${state.certifications.map(c => `
      <div>
        <strong>${esc(c.name)}</strong> — ${esc(c.issuer)} (${esc(c.year)})
      </div>
    `).join("")}
  `;
}
  
function renderProjectsPreview(){
  if (!state.projects?.length) return "";

  return `
    <h4 style="margin:18px 0 10px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:#444;">Projects</h4>
    ${state.projects.map(p => `
      <div style="margin-bottom:10px;">
        <strong>${esc(p.title)}</strong>${p.role ? ` — ${esc(p.role)}` : ""}
        <div style="font-size:13px;color:#555;line-height:1.5;">${esc(p.desc)}</div>
      </div>
    `).join("")}
  `;
}
  
function renderReferencesPreview(){
  if (!state.showReferences) return "";
  return `<p style="margin-top:20px;font-style:italic;">References available upon request.</p>`;
}  
  
function renderResume(){
  const name = esc(state.fullName?.trim() || "—");
  const role = esc(state.roleTitle?.trim() || " ");
  const email = esc(state.email?.trim() || "");
  const phone = esc(state.phone?.trim() || "");
  const address = esc(state.address?.trim() || "");
  const summary = esc(state.summary?.trim() || " ");

  const contactBits = [email, phone, address].filter(Boolean).join(" • ");

  const headshot = state.showHeadshot
    ? `<div style="width:90px;height:90px;border-radius:50%;background:#e7e7e7;flex:0 0 auto;"></div>`
    : "";

  return `
    <div style="display:flex;justify-content:space-between;align-items:center;gap:20px;flex-wrap:wrap;">
      <div style="min-width:260px;">
        <h2 style="margin:0;">${name}</h2>
        <div style="color:#444;font-size:14px;margin-top:4px;">${role}</div>
        <div style="margin-top:8px;font-size:13px;color:#555;">${contactBits || " "}</div>
      </div>
      ${headshot}
    </div>

    <hr style="border:none;border-top:1px solid #e7e7e7;margin:18px 0;">

    <p style="line-height:1.6;margin:0;">${summary}</p>

    <hr style="border:none;border-top:1px solid #e7e7e7;margin:18px 0;">

    ${renderExperiencePreview()}
    ${renderEducationPreview()}
    ${renderSkillsPreview()}
    ${renderCertificationsPreview()}
    ${renderProjectsPreview()}
    ${renderReferencesPreview()}
  `;
}
  function renderNDA(){
    const name = esc(state.fullName.trim() || "—");
    return `
      <h3 style="margin-top:0;">Mutual NDA</h3>
      <p class="preview-muted">Draft preview (template switch demo)</p>
      <p><strong>Parties:</strong> ${name} (“Receiving Party”) and __________________ (“Disclosing Party”).</p>
      <p><strong>Purpose:</strong> ${esc(state.summary.trim() || " ")}</p>
      <p><strong>Confidentiality:</strong> Receiving Party agrees to protect confidential information and not disclose it to third parties.</p>
      <p><strong>Term:</strong> ____ years from the Effective Date.</p>
    `;
  }

  function renderEmployment(){
    const name = esc(state.fullName.trim() || "—");
    return `
      <h3 style="margin-top:0;">Employment Application</h3>
      <p class="preview-muted">Draft preview (template switch demo)</p>
      <p><strong>Applicant:</strong> ${name}</p>
      <p><strong>Desired Position:</strong> ${esc(state.roleTitle.trim() || " ")}</p>
      <p><strong>Notes:</strong> ${esc(state.summary.trim() || " ")}</p>
    `;
  }

  function renderPreview(){
    const root = $("previewRoot");
    if (!root) return;
    if (state.templateType === "nda") root.innerHTML = renderNDA();
    else if (state.templateType === "employment") root.innerHTML = renderEmployment();
    else root.innerHTML = renderResume();
  }
  
 function wireSkillsInput(){
  const input = $("skillInput");
  const btn = $("btnAddSkill"); // optional if you add the button
  if (!input) return;

  // prevent double-binding
  if (input.dataset.wired === "1") return;
  input.dataset.wired = "1";

  input.addEventListener("keydown", (e) => {
    if (e.key !== "Enter") return;
    e.preventDefault();

    const val = normalizeSkill(input.value);
    if (!val) return;

    const exists = (state.skills || []).some(x => String(x).toLowerCase() === val.toLowerCase());
    if (!exists) state.skills.push(val);

    input.value = "";
    renderSkillsEditor();
    renderPreview();
  });

  // If you added an Add button, wire it too (safe even if missing)
  if (btn && btn.dataset.wired !== "1") {
    btn.dataset.wired = "1";
    btn.addEventListener("click", () => {
      const val = normalizeSkill(input.value);
      if (!val) return;

      const exists = (state.skills || []).some(x => String(x).toLowerCase() === val.toLowerCase());
      if (!exists) state.skills.push(val);

      input.value = "";
      input.focus();
      renderSkillsEditor();
      renderPreview();
    });
  }
}
  
  function bind(){
    // Seed inputs
    $("templateType").value = state.templateType;
    $("fullName").value = state.fullName;
    $("roleTitle").value = state.roleTitle;
    $("summary").value = state.summary;

    $("email").value = state.email;
    $("phone").value = state.phone;
    $("address").value = state.address;
    $("toggleHeadshot").checked = !!state.showHeadshot;

    $("templateType").addEventListener("change", (e) => {
  state.templateType = e.target.value;
  syncLeftPanelVisibility();
  wireSkillsInput();   // ✅ re-wire after any panel changes
  renderPreview();
});

    $("fullName").addEventListener("input", (e) => { state.fullName = e.target.value; renderPreview(); });
    $("roleTitle").addEventListener("input", (e) => { state.roleTitle = e.target.value; renderPreview(); });
    $("summary").addEventListener("input", (e) => { state.summary = e.target.value; renderPreview(); });

    $("email").addEventListener("input", (e) => { state.email = e.target.value; renderPreview(); });
    $("phone").addEventListener("input", (e) => { state.phone = e.target.value; renderPreview(); });
    $("address").addEventListener("input", (e) => { state.address = e.target.value; renderPreview(); });
    $("toggleHeadshot").addEventListener("change", (e) => { state.showHeadshot = e.target.checked; renderPreview(); });

    $("btnAddExp").addEventListener("click", () => {
      state.experience.push({ company:"", role:"", dates:"", location:"", desc:"" });
      renderExperienceEditor();
      renderPreview();
    });

    $("btnAddEdu").addEventListener("click", () => {
      state.education.push({ school:"", degree:"", dates:"", location:"", notes:"" });
      renderEducationEditor();
      renderPreview();
    });

    $("btnPreview").addEventListener("click", () => renderPreview());

// Skills: add on Enter
const skillInput = $("skillInput");
if (skillInput) {
  skillInput.addEventListener("keydown", (e) => {
  console.log("KEY:", e.key);
    if (e.key !== "Enter") return;
    e.preventDefault();

    const val = normalizeSkill(skillInput.value);
    if (!val) return;

    const exists = state.skills.some(x => x.toLowerCase() === val.toLowerCase());
    if (!exists) state.skills.push(val);

    skillInput.value = "";
    renderSkillsEditor();
    renderPreview();
  });
}

// One-time initial paint
syncLeftPanelVisibility();
wireSkillsInput();    
renderExperienceEditor();
renderEducationEditor();
renderSkillsEditor();
renderPreview();
}

document.getElementById("buildId").textContent =
  new Date(document.lastModified).toLocaleString();
  
  bind();
</script>

</body>
</html>

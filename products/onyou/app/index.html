<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OnYou Builder • MikeGuides Dev Group</title>

  <link rel="stylesheet" href="../../../assets/css/site.css" />

  <style>
    .builder-layout{
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
      padding: 32px 0 60px;
    }

    @media (min-width: 1000px){
      .builder-layout{
        grid-template-columns: 420px 1fr;
      }
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
    }

    .panel h2{
      margin:0 0 12px;
      font-family:Poppins,Inter,sans-serif;
      font-size:18px;
    }

    .field-group{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-bottom:16px;
    }

    label{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
      letter-spacing:.06em;
      text-transform:uppercase;
    }

    input, textarea, select{
      background: rgba(255,255,255,.06);
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      color:var(--text);
      font-size:14px;
    }
    
select {
  background: rgba(255,255,255,.06);
  color: var(--text);
}

select option {
  color: black;
  background: white;
}
    textarea{
      min-height:80px;
      resize:vertical;
    }

    .preview-area{
      background:white;
      color:black;
      border-radius:12px;
      padding:24px;
      min-height:500px;
    }

    .preview-area h3{ margin-top:0; }
    .preview-muted{ color:#555; font-size:14px; }

    .hint{
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
    }
    .block{
  border:1px solid var(--border);
  background: rgba(255,255,255,.03);
  border-radius: 14px;
  padding: 12px;
  margin-bottom: 12px;
}

.block-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 10px;
}

.block-title{
  font-weight:900;
  font-size:13px;
  color: var(--muted);
  letter-spacing:.08em;
  text-transform:uppercase;
}

.btn-sm{
  padding:8px 10px;
  border-radius: 12px;
  font-size: 13px;
}
  </style>
</head>
<body>

<header class="topbar">
  <div class="topbar-inner container">
    <a class="brand" href="../../">
      <span class="brand-mark">MG</span>
      <span class="brand-text">
        <span class="brand-name">MikeGuides Dev Group</span>
        <span class="brand-sub">OnYou Builder</span>
      </span>
    </a>

    <div class="actions">
      <a class="btn btn-ghost" href="../">Back to Product</a>
    </div>
  </div>
</header>

<main class="container">

  <div class="builder-layout">

    <!-- LEFT PANEL -->
    <div class="panel">
      <h2>Form Configuration</h2>

      <div class="field-group">
        <label for="templateType">Template Type</label>
        <select id="templateType">
          <option value="resume">Resume</option>
          <option value="nda">NDA</option>
          <option value="employment">Employment Application</option>
        </select>
      </div>

      <div class="mini-divider"></div>

<div class="block-title">Contact</div>

<div class="field-group">
  <label for="email">Email</label>
  <input id="email" type="text" placeholder="email@example.com">
</div>

<div class="field-group">
  <label for="phone">Phone</label>
  <input id="phone" type="text" placeholder="(555) 123-4567">
</div>

<div class="field-group">
  <label for="address">Address</label>
  <input id="address" type="text" placeholder="City, State">
</div>

<div class="field-group">
  <label>
    <input id="toggleHeadshot" type="checkbox" checked>
    Include Headshot Placeholder
  </label>
</div>
      
      <div class="field-group">
        <label for="fullName">Full Name</label>
        <input id="fullName" type="text" placeholder="John Doe" autocomplete="name">
      </div>

      <div class="field-group">
        <label for="roleTitle">Title / Role</label>
        <input id="roleTitle" type="text" placeholder="Project Manager" autocomplete="organization-title">
      </div>

      <div class="field-group">
        <label for="summary">Summary</label>
        <textarea id="summary" placeholder="Brief professional summary..."></textarea>
      </div>
      
<div class="mini-divider"></div>

<div class="block-head">
  <div class="block-title">Experience</div>
  <button id="btnAddExp" class="btn btn-ghost btn-sm" type="button">+ Add Experience</button>
</div>

<div id="expList"></div>
      
 <div class="mini-divider"></div>

<div class="block-head">
  <div class="block-title">Education</div>
  <button id="btnAddEdu" class="btn btn-ghost btn-sm" type="button">+ Add Education</button>
</div>

<div id="eduList"></div>  
      
      <button id="btnPreview" class="btn btn-wide" type="button">Generate Preview</button>
      <div class="hint">Live preview updates as you type. Button will later run template + validation.</div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="panel">
      <h2>Live Preview</h2>

      <div class="preview-area" id="previewRoot"></div>
    </div>

  </div>

</main>

<script>
  const $ = (id) => document.getElementById(id);

  const state = {
  templateType: "resume",
  fullName: "John Doe",
  roleTitle: "Project Manager",
  summary: "This area will render structured output in real time. The final layout will be export-ready and professionally formatted.",

    email: "john@example.com",
phone: "(555) 123-4567",
address: "Chicago, IL",
showHeadshot: true,
    
  experience: [
    {
      company: "Acme Construction",
      role: "Project Manager",
      dates: "2022 – Present",
      location: "Chicago, IL",
      desc: "Led multi-site project execution, improved coordination, and reduced delays through clear scheduling and stakeholder communication."
    }
  ],

  education: [
    {
      school: "State University",
      degree: "B.S. Business Administration",
      dates: "2018 – 2022",
      location: "Springfield, IL",
      notes: "Relevant coursework: operations, finance, project management."
    }
  ]
};

  function esc(s){
    return String(s ?? "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function renderExperienceEditor(){
    const host = $("expList");
    if (!host) return;

    host.innerHTML = state.experience.map((x, idx) => `
      <div class="block">
        <div class="block-head">
          <div class="block-title">Entry ${idx + 1}</div>
          <button class="btn btn-ghost btn-sm" type="button" data-exp-remove="${idx}">Remove</button>
        </div>

        <div class="field-group">
          <label for="exp_company_${idx}">Company</label>
          <input id="exp_company_${idx}" type="text" value="${esc(x.company)}" placeholder="Company name" />
        </div>

        <div class="field-group">
          <label for="exp_role_${idx}">Role / Title</label>
          <input id="exp_role_${idx}" type="text" value="${esc(x.role)}" placeholder="Role/title" />
        </div>

        <div class="field-group">
          <label for="exp_dates_${idx}">Dates</label>
          <input id="exp_dates_${idx}" type="text" value="${esc(x.dates)}" placeholder="2022 – Present" />
        </div>

        <div class="field-group">
          <label for="exp_location_${idx}">Location</label>
          <input id="exp_location_${idx}" type="text" value="${esc(x.location)}" placeholder="City, State" />
        </div>

        <div class="field-group">
          <label for="exp_desc_${idx}">Description</label>
          <textarea id="exp_desc_${idx}" placeholder="What did you do? What changed because you did it?">${esc(x.desc)}</textarea>
        </div>
      </div>
    `).join("");

    // Bind inputs
    state.experience.forEach((_, idx) => {
      $("exp_company_" + idx)?.addEventListener("input", (e) => { state.experience[idx].company = e.target.value; renderPreview(); });
      $("exp_role_" + idx)?.addEventListener("input", (e) => { state.experience[idx].role = e.target.value; renderPreview(); });
      $("exp_dates_" + idx)?.addEventListener("input", (e) => { state.experience[idx].dates = e.target.value; renderPreview(); });
      $("exp_location_" + idx)?.addEventListener("input", (e) => { state.experience[idx].location = e.target.value; renderPreview(); });
      $("exp_desc_" + idx)?.addEventListener("input", (e) => { state.experience[idx].desc = e.target.value; renderPreview(); });
    });

    // Remove buttons (event delegation)
    host.querySelectorAll("[data-exp-remove]").forEach(btn => {
      btn.addEventListener("click", () => {
        const i = Number(btn.getAttribute("data-exp-remove"));
        state.experience.splice(i, 1);
        renderExperienceEditor();
        renderPreview();
      });
    });
  }

  function renderExperiencePreview(){
    if (!state.experience.length) {
      return `<p class="preview-muted"><strong>Experience:</strong> (none yet)</p>`;
    }

    return `
      <h4 style="margin:18px 0 10px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:#444;">Experience</h4>
      ${state.experience.map(x => `
        <div style="margin-bottom:12px;">
          <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div><strong>${esc(x.role || " ")}</strong> — ${esc(x.company || " ")}</div>
            <div style="color:#666; font-size:13px;">${esc(x.dates || "")}${x.location ? " • " + esc(x.location) : ""}</div>
          </div>
          <div style="margin-top:6px; color:#222; font-size:14px; line-height:1.5;">${esc(x.desc || " ")}</div>
        </div>
      `).join("")}
    `;
  }
  function renderEducationEditor(){
  const host = $("eduList");
  if (!host) return;

  host.innerHTML = state.education.map((x, idx) => `
    <div class="block">
      <div class="block-head">
        <div class="block-title">Entry ${idx + 1}</div>
        <button class="btn btn-ghost btn-sm" type="button" data-edu-remove="${idx}">Remove</button>
      </div>

      <div class="field-group">
        <label for="edu_school_${idx}">School</label>
        <input id="edu_school_${idx}" type="text" value="${esc(x.school)}" placeholder="School / Institution" />
      </div>

      <div class="field-group">
        <label for="edu_degree_${idx}">Degree / Program</label>
        <input id="edu_degree_${idx}" type="text" value="${esc(x.degree)}" placeholder="Degree or program" />
      </div>

      <div class="field-group">
        <label for="edu_dates_${idx}">Dates</label>
        <input id="edu_dates_${idx}" type="text" value="${esc(x.dates)}" placeholder="2018 – 2022" />
      </div>

      <div class="field-group">
        <label for="edu_location_${idx}">Location</label>
        <input id="edu_location_${idx}" type="text" value="${esc(x.location)}" placeholder="City, State" />
      </div>

      <div class="field-group">
        <label for="edu_notes_${idx}">Notes</label>
        <textarea id="edu_notes_${idx}" placeholder="Honors, coursework, focus...">${esc(x.notes)}</textarea>
      </div>
    </div>
  `).join("");

  state.education.forEach((_, idx) => {
    $("edu_school_" + idx)?.addEventListener("input", (e) => { state.education[idx].school = e.target.value; renderPreview(); });
    $("edu_degree_" + idx)?.addEventListener("input", (e) => { state.education[idx].degree = e.target.value; renderPreview(); });
    $("edu_dates_" + idx)?.addEventListener("input", (e) => { state.education[idx].dates = e.target.value; renderPreview(); });
    $("edu_location_" + idx)?.addEventListener("input", (e) => { state.education[idx].location = e.target.value; renderPreview(); });
    $("edu_notes_" + idx)?.addEventListener("input", (e) => { state.education[idx].notes = e.target.value; renderPreview(); });
  });

  host.querySelectorAll("[data-edu-remove]").forEach(btn => {
    btn.addEventListener("click", () => {
      const i = Number(btn.getAttribute("data-edu-remove"));
      state.education.splice(i, 1);
      renderEducationEditor();
      renderPreview();
    });
  });
}

function renderEducationPreview(){
  if (!state.education.length) {
    return `<p class="preview-muted"><strong>Education:</strong> (none yet)</p>`;
  }

  return `
    <h4 style="margin:18px 0 10px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:#444;">Education</h4>
    ${state.education.map(x => `
      <div style="margin-bottom:12px;">
        <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
          <div><strong>${esc(x.degree || " ")}</strong> — ${esc(x.school || " ")}</div>
          <div style="color:#666; font-size:13px;">${esc(x.dates || "")}${x.location ? " • " + esc(x.location) : ""}</div>
        </div>
        ${x.notes ? `<div style="margin-top:6px; color:#222; font-size:14px; line-height:1.5;">${esc(x.notes)}</div>` : ""}
      </div>
    `).join("")}
  `;
}
  
education: [
  {
    school: "State University",
    degree: "B.S. Business Administration",
    dates: "2018 – 2022",
    location: "Springfield, IL",
    notes: "Relevant coursework: operations, finance, project management."
  }
]
  
  function renderResume(){
    return `
      <h3 style="margin-top:0;">${esc(state.fullName.trim() || "—")}</h3>
      <p class="preview-muted">${esc(state.roleTitle.trim() || " ")}</p>

      <p style="line-height:1.6; margin-top:12px;">${esc(state.summary.trim() || " ")}</p>

      <hr style="border:none;border-top:1px solid #e7e7e7;margin:18px 0;">

      ${renderExperiencePreview()}
${renderEducationPreview()}

      <hr style="border:none;border-top:1px solid #e7e7e7;margin:18px 0;">
      <p class="preview-muted"><strong>Next:</strong> Education + Skills blocks.</p>
    `;
  }

  function renderNDA(){
    const name = esc(state.fullName.trim() || "—");
    return `
      <h3 style="margin-top:0;">Mutual NDA</h3>
      <p class="preview-muted">Draft preview (template switch demo)</p>

      <p><strong>Parties:</strong> ${name} (“Receiving Party”) and __________________ (“Disclosing Party”).</p>
      <p><strong>Purpose:</strong> ${esc(state.summary.trim() || " ")}</p>

      <p><strong>Confidentiality:</strong> Receiving Party agrees to protect confidential information and not disclose it to third parties.</p>
      <p><strong>Term:</strong> ____ years from the Effective Date.</p>

      <hr style="border:none;border-top:1px solid #e7e7e7;margin:18px 0;">
      <p class="preview-muted"><strong>Next:</strong> fields for parties, effective date, term, jurisdiction.</p>
    `;
  }

  function renderEmployment(){
    const name = esc(state.fullName.trim() || "—");
    return `
      <h3 style="margin-top:0;">Employment Application</h3>
      <p class="preview-muted">Draft preview (template switch demo)</p>

      <p><strong>Applicant:</strong> ${name}</p>
      <p><strong>Desired Position:</strong> ${esc(state.roleTitle.trim() || " ")}</p>
      <p><strong>Notes:</strong> ${esc(state.summary.trim() || " ")}</p>

      <hr style="border:none;border-top:1px solid #e7e7e7;margin:18px 0;">
      <p class="preview-muted"><strong>Next:</strong> add contact, availability, work history, education blocks.</p>
    `;
  }

  function renderPreview(){
    const root = $("previewRoot");
    if (!root) return;

    if (state.templateType === "nda") root.innerHTML = renderNDA();
    else if (state.templateType === "employment") root.innerHTML = renderEmployment();
    else root.innerHTML = renderResume();
  }

  function syncLeftPanelVisibility(){
    // Only show Experience editor when Resume is selected
    const show = state.templateType === "resume";
    const expHost = $("expList");
    const addBtn = $("btnAddExp");
    const eduHost = $("eduList");
const eduBtn = $("btnAddEdu");
if (eduHost) eduHost.style.display = show ? "" : "none";
if (eduBtn) eduBtn.style.display = show ? "" : "none";
    if (expHost) expHost.style.display = show ? "" : "none";
    if (addBtn) addBtn.style.display = show ? "" : "none";
    // (The header row contains both; simplest is to keep it but hide host/buttons)
  }

  function bind(){
    $("templateType").addEventListener("change", (e) => {
      state.templateType = e.target.value;
      syncLeftPanelVisibility();
      renderExperienceEditor();
      renderPreview();
    });
    $("email").value = state.email;
$("phone").value = state.phone;
$("address").value = state.address;
$("toggleHeadshot").checked = state.showHeadshot;
    $("fullName").addEventListener("input", (e) => { state.fullName = e.target.value; renderPreview(); });
    $("roleTitle").addEventListener("input", (e) => { state.roleTitle = e.target.value; renderPreview(); });
    $("summary").addEventListener("input", (e) => { state.summary = e.target.value; renderPreview(); });
    $("email").addEventListener("input", (e) => {
  state.email = e.target.value;
  renderPreview();
});

$("phone").addEventListener("input", (e) => {
  state.phone = e.target.value;
  renderPreview();
});

$("address").addEventListener("input", (e) => {
  state.address = e.target.value;
  renderPreview();
});

$("toggleHeadshot").addEventListener("change", (e) => {
  state.showHeadshot = e.target.checked;
  renderPreview();
});

    $("btnAddExp").addEventListener("click", () => {
      state.experience.push({
        company: "",
        role: "",
        dates: "",
        location: "",
        desc: ""
      });
      renderExperienceEditor();
      renderPreview();
    });
    
$("btnAddEdu").addEventListener("click", () => {
  state.education.push({
    school: "",
    degree: "",
    dates: "",
    location: "",
    notes: ""
  });
  renderEducationEditor();
  renderPreview();
});
    $("btnPreview").addEventListener("click", () => renderPreview());

    syncLeftPanelVisibility();
    renderExperienceEditor();
    renderEducationEditor();
    renderPreview();
  }

  bind();
</script>
</body>
</html>
